{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonhos de Luar - Pijamas e Moda √çntima</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="icon" type="image/png" href="{% static 'FaveCoin.png' %}">
    <style>
        /* Cores personalizadas do seu logo */
        :root {
            --color-primary-text: #375F6F; /* Azul escuro do texto "Sonhos de luar" */
            --color-secondary-bg: #F8F3ED; /* Bege claro de fundo */
            --color-accent-blue: #4D7E8F; /* Azul da lua */
        }
        .text-primary-text { color: var(--color-primary-text); }
        .bg-secondary-bg { background-color: var(--color-secondary-bg); }
        .text-accent-blue { color: var(--color-accent-blue); }
        .bg-accent-blue { background-color: var(--color-accent-blue); }
        
        /* Fontes (opcional: para usar a fonte exata da logo, voc√™ precisaria importar e configurar) */
        /* Por enquanto, vamos usar uma fonte sans-serif agrad√°vel */
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
    </style>
</head>
<body class="bg-secondary-bg text-primary-text min-h-screen flex flex-col">
    {% if messages %}
    <div id="toast-container" class="fixed top-24 right-4 z-50 space-y-2">
        {% for message in messages %}
        <div id="toast-{{ forloop.counter }}" 
             class="max-w-xs bg-green-500 text-white text-sm font-semibold rounded-lg shadow-lg p-4 transition-opacity duration-500" 
             role="alert">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                <span>{{ message }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    <header class="bg-white shadow-sm py-4">
        </header>

    <header class="bg-white shadow-sm py-4">
        <nav class="container mx-auto grid grid-cols-3 items-center px-4">
            
            <div>
                </div>

            <a href="{% url 'lista_produtos' %}" class="flex items-center space-x-2 justify-center">
                <img src="{% static 'sonhos_de_luar_logo.png' %}" alt="Sonhos de Luar Logo" class="h-20 w-auto"> 
                <span class="text-3xl font-semibold text-primary-text">Sonhos de luar</span>
            </a>

            <div class="flex justify-end">
                <a href="{% url 'ver_carrinho' %}" class="relative text-accent-blue hover:text-primary-text transition-colors duration-200">
                    <svg class="w-6 h-6 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center">
                        {% if request.session.carrinho %}{{ request.session.carrinho|length }}{% else %}0{% endif %}
                    </span>
                    <span class="ml-1 hidden sm:inline">Carrinho</span>
                </a>
            </div>

        </nav>
    </header>

    <main class="flex-grow container mx-auto py-8 px-4">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="bg-secondary-bg text-primary-text py-6 mt-8 border-t border-gray-300">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 Sonhos de Luar. Todos os direitos reservados.</p>
            <p class="text-sm mt-2">Feito com üíñ por Yuri Rezende</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    {% block scripts %}
    {% endblock %}

    <script>
    // Pega o container do toast
    const toastContainer = document.getElementById('toast-container');
    
    if (toastContainer) {
        // Pega todos os toasts individuais
        const toasts = toastContainer.querySelectorAll('[id^="toast-"]');
        
        toasts.forEach((toast, index) => {
            // Faz o toast desaparecer depois de 3 segundos (3000ms)
            setTimeout(() => {
                // Adiciona classes para um "fade-out" suave
                toast.classList.add('opacity-0');
                
                // Remove o elemento do DOM depois que a transi√ß√£o terminar (500ms)
                setTimeout(() => {
                    toast.remove();
                    // Se n√£o houver mais toasts, remove o container
                    if (toastContainer.children.length === 0) {
                        toastContainer.remove();
                    }
                }, 500); // Deve ser igual √† dura√ß√£o da transi√ß√£o
                
            }, 3000 + (index * 500)); // 3 segundos, com um pequeno atraso se houver v√°rias mensagens
        });
    }
    </script>
</body>
</html>